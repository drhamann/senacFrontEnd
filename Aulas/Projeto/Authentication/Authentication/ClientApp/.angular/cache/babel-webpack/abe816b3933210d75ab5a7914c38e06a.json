{"ast":null,"code":"import _asyncToGenerator from \"E:/sourceCode/senac/senacFrontEnd/Aulas/Projeto/Authentication/Authentication/ClientApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../auth/auth.service\";\nimport * as i3 from \"@angular/router\";\nexport class LoginComponent {\n  constructor(formBuilder, authService, router, route) {\n    this.formBuilder = formBuilder;\n    this.authService = authService;\n    this.router = router;\n    this.route = route;\n    this.loginError = '';\n    route.paramMap.subscribe(params => this.redirectUrl = params.get('redirectUrl'));\n  }\n\n  ngOnInit() {\n    this.buildLoginForm();\n  }\n\n  buildLoginForm() {\n    this.loginForm = this.formBuilder.group({\n      email: ['', [Validators.required, Validators.email]],\n      password: ['', [Validators.required, Validators.minLength(8), Validators.maxLength(50)]]\n    });\n  }\n\n  login(submittedForm) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      _this.authService.login(submittedForm.value.email, submittedForm.value.password).subscribe(authStatus => {\n        if (authStatus.isAuthenticated) {\n          _this.router.navigate([_this.redirectUrl || '/manager']);\n        }\n      }, error => _this.loginError = error);\n    })();\n  }\n\n}\n\nLoginComponent.ɵfac = function LoginComponent_Factory(t) {\n  return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i3.ActivatedRoute));\n};\n\nLoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: LoginComponent,\n  selectors: [[\"app-login\"]],\n  decls: 2,\n  vars: 0,\n  template: function LoginComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"p\");\n      i0.ɵɵtext(1, \" login works!\\n\");\n      i0.ɵɵelementEnd();\n    }\n  },\n  styles: [\".error[_ngcontent-%COMP%] {\\r\\n color: red\\r\\n }\\r\\n\\r\\n div[fxLayout][_ngcontent-%COMP%] {margin-top: 32px;}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxvZ2luLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Q0FDQztDQUNBOztDQUVBLGVBQWUsZ0JBQWdCLENBQUMiLCJmaWxlIjoibG9naW4uY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5lcnJvciB7XHJcbiBjb2xvcjogcmVkXHJcbiB9XHJcblxyXG4gZGl2W2Z4TGF5b3V0XSB7bWFyZ2luLXRvcDogMzJweDt9XHJcbiJdfQ== */\"]\n});","map":{"version":3,"sources":["E:/sourceCode/senac/senacFrontEnd/Aulas/Projeto/Authentication/Authentication/ClientApp/src/app/login/login.component.ts"],"names":["Validators","i0","i1","i2","i3","LoginComponent","constructor","formBuilder","authService","router","route","loginError","paramMap","subscribe","params","redirectUrl","get","ngOnInit","buildLoginForm","loginForm","group","email","required","password","minLength","maxLength","login","submittedForm","value","authStatus","isAuthenticated","navigate","error","ɵfac","LoginComponent_Factory","t","ɵɵdirectiveInject","FormBuilder","AuthService","Router","ActivatedRoute","ɵcmp","ɵɵdefineComponent","type","selectors","decls","vars","template","LoginComponent_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","styles"],"mappings":"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","sourcesContent":["import { Validators } from '@angular/forms';\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"@angular/forms\";\r\nimport * as i2 from \"../auth/auth.service\";\r\nimport * as i3 from \"@angular/router\";\r\nexport class LoginComponent {\r\n    constructor(formBuilder, authService, router, route) {\r\n        this.formBuilder = formBuilder;\r\n        this.authService = authService;\r\n        this.router = router;\r\n        this.route = route;\r\n        this.loginError = '';\r\n        route.paramMap.subscribe(params => (this.redirectUrl = params.get('redirectUrl')));\r\n    }\r\n    ngOnInit() {\r\n        this.buildLoginForm();\r\n    }\r\n    buildLoginForm() {\r\n        this.loginForm = this.formBuilder.group({\r\n            email: ['', [Validators.required, Validators.email]],\r\n            password: ['', [\r\n                    Validators.required,\r\n                    Validators.minLength(8),\r\n                    Validators.maxLength(50),\r\n                ]],\r\n        });\r\n    }\r\n    async login(submittedForm) {\r\n        this.authService\r\n            .login(submittedForm.value.email, submittedForm.value.password)\r\n            .subscribe(authStatus => {\r\n            if (authStatus.isAuthenticated) {\r\n                this.router.navigate([this.redirectUrl || '/manager']);\r\n            }\r\n        }, error => (this.loginError = error));\r\n    }\r\n}\r\nLoginComponent.ɵfac = function LoginComponent_Factory(t) { return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i3.ActivatedRoute)); };\r\nLoginComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: LoginComponent, selectors: [[\"app-login\"]], decls: 2, vars: 0, template: function LoginComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵelementStart(0, \"p\");\r\n        i0.ɵɵtext(1, \" login works!\\n\");\r\n        i0.ɵɵelementEnd();\r\n    } }, styles: [\".error[_ngcontent-%COMP%] {\\r\\n color: red\\r\\n }\\r\\n\\r\\n div[fxLayout][_ngcontent-%COMP%] {margin-top: 32px;}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxvZ2luLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Q0FDQztDQUNBOztDQUVBLGVBQWUsZ0JBQWdCLENBQUMiLCJmaWxlIjoibG9naW4uY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5lcnJvciB7XHJcbiBjb2xvcjogcmVkXHJcbiB9XHJcblxyXG4gZGl2W2Z4TGF5b3V0XSB7bWFyZ2luLXRvcDogMzJweDt9XHJcbiJdfQ== */\"] });\r\n"]},"metadata":{},"sourceType":"module"}